{
	"$schema": "https://json-schema.org/draft-07/schema#",
	"title": "Development Workflow Configuration",
	"description": "Example proactive hook configuration for standard development workflow: lint → test → build",
	"version": "1.0.0",
	"workflowType": "development",

	"taskCompletionCommands": {
		"description": "Commands executed when a development task completes",
		"always": [
			{
				"command": "echo",
				"args": ["Development task completed - running quality checks"],
				"timeout": 5,
				"continueOnFailure": true,
				"description": "Basic completion notification"
			}
		],
		"onSuccess": [
			{
				"command": "npm",
				"args": ["run", "lint"],
				"timeout": 30,
				"continueOnFailure": false,
				"description": "Run oxlint to check code quality and dprint to format",
				"conditions": {
					"fileExists": "package.json",
					"scriptExists": "lint"
				}
			},
			{
				"command": "npm",
				"args": ["run", "test"],
				"timeout": 90,
				"continueOnFailure": false,
				"description": "Run Vitest test suite after successful linting",
				"conditions": {
					"fileExists": "package.json",
					"scriptExists": "test",
					"previousCommandSuccess": true
				}
			},
			{
				"command": "npm",
				"args": ["run", "test:e2e"],
				"timeout": 180,
				"continueOnFailure": true,
				"description": "Run Playwright E2E tests if available",
				"conditions": {
					"fileExists": "package.json",
					"scriptExists": "test:e2e",
					"previousCommandSuccess": true
				}
			}
		],
		"onFailure": [
			{
				"command": "echo",
				"args": [
					"Development task failed - check logs and fix issues before continuing"
				],
				"timeout": 5,
				"continueOnFailure": true,
				"description": "Failure notification with guidance"
			},
			{
				"command": "npm",
				"args": ["run", "lint:fix"],
				"timeout": 30,
				"continueOnFailure": true,
				"description": "Attempt to auto-fix oxlint and dprint formatting issues",
				"conditions": {
					"fileExists": "package.json",
					"scriptExists": "lint:fix"
				}
			}
		]
	},

	"planCompletionCommands": {
		"description": "Commands executed when the development plan completes",
		"always": [
			{
				"command": "echo",
				"args": ["Development plan completed - preparing production build"],
				"timeout": 5,
				"continueOnFailure": true,
				"description": "Plan completion notification"
			}
		],
		"onSuccess": [
			{
				"command": "npm",
				"args": ["run", "build"],
				"timeout": 180,
				"continueOnFailure": false,
				"description": "Create production build",
				"conditions": {
					"fileExists": "package.json",
					"scriptExists": "build"
				}
			},
			{
				"command": "npm",
				"args": ["run", "test:coverage"],
				"timeout": 120,
				"continueOnFailure": true,
				"description": "Generate Vitest coverage report",
				"conditions": {
					"fileExists": "package.json",
					"scriptExists": "test:coverage"
				}
			},
			{
				"command": "echo",
				"args": [
					"✅ Development workflow completed successfully! Build ready for deployment."
				],
				"timeout": 5,
				"continueOnFailure": true,
				"description": "Success celebration message"
			}
		],
		"onFailure": [
			{
				"command": "echo",
				"args": [
					"❌ Development workflow completed with some failures - review logs"
				],
				"timeout": 5,
				"continueOnFailure": true,
				"description": "Failure summary message"
			},
			{
				"command": "npm",
				"args": ["run", "lint", "--", "--fix"],
				"timeout": 30,
				"continueOnFailure": true,
				"description": "Attempt to fix common issues",
				"conditions": {
					"fileExists": "package.json",
					"scriptExists": "lint"
				}
			}
		]
	},

	"environmentSetup": {
		"description": "Environment variables and setup for development workflow",
		"requiredTools": ["npm", "node", "git"],
		"optionalTools": [
			"typescript",
			"oxc",
			"dprint",
			"prettier",
			"vitest",
			"playwright"
		],
		"environmentVariables": {
			"NODE_ENV": "development",
			"CI": "false",
			"DEVELOPMENT_WORKFLOW": "true"
		}
	},

	"qualityGates": {
		"description": "Quality gates that must pass for workflow success",
		"linting": {
			"enabled": true,
			"tool": "oxlint",
			"failOnError": true,
			"autoFix": true,
			"formatOnSave": true
		},
		"testing": {
			"enabled": true,
			"tool": "vitest",
			"failOnError": true,
			"minimumCoverage": 80,
			"watchMode": false
		},
		"e2eTesting": {
			"enabled": true,
			"tool": "playwright",
			"failOnError": false,
			"browsers": ["chromium", "firefox", "webkit"]
		},
		"building": {
			"enabled": true,
			"failOnError": true,
			"optimizeForProduction": true
		}
	},

	"notifications": {
		"description": "Notification settings for development workflow",
		"onTaskComplete": {
			"enabled": true,
			"message": "Development task completed - quality checks running"
		},
		"onPlanComplete": {
			"enabled": true,
			"message": "Development plan completed - build ready for deployment"
		},
		"onError": {
			"enabled": true,
			"message": "Development workflow encountered errors - check logs"
		}
	},

	"examples": {
		"description": "Example usage scenarios for development workflow",
		"reactProject": {
			"description": "React project with TypeScript, oxlint, and dprint",
			"requiredScripts": [
				"lint",
				"lint:fix",
				"test",
				"test:e2e",
				"test:coverage",
				"build"
			],
			"additionalCommands": [
				{
					"command": "npm",
					"args": ["run", "format"],
					"description": "Format code with dprint and prettier fallback"
				}
			]
		},
		"nodeApiProject": {
			"description": "Node.js API project",
			"requiredScripts": ["lint", "test", "build"],
			"additionalCommands": [
				{
					"command": "npm",
					"args": ["run", "security-audit"],
					"description": "Run security audit"
				}
			]
		},
		"fullStackProject": {
			"description": "Full-stack project with frontend and backend",
			"requiredScripts": ["lint", "test", "build", "test:e2e"],
			"additionalCommands": [
				{
					"command": "npm",
					"args": ["run", "test:integration"],
					"description": "Run integration tests"
				}
			]
		}
	},

	"troubleshooting": {
		"description": "Common issues and solutions for development workflow",
		"commonIssues": {
			"lintFailures": {
				"problem": "oxlint linting fails with style errors",
				"solution": "Run 'npm run lint:fix' to auto-fix issues, or manually resolve remaining errors"
			},
			"testFailures": {
				"problem": "Vitest tests fail unexpectedly",
				"solution": "Check test logs, ensure dependencies are installed, verify Vitest configuration"
			},
			"e2eFailures": {
				"problem": "Playwright E2E tests fail",
				"solution": "Check browser installations, verify test selectors, review Playwright configuration"
			},
			"buildFailures": {
				"problem": "Build process fails",
				"solution": "Check for TypeScript errors, missing dependencies, or incorrect build configuration"
			},
			"slowPerformance": {
				"problem": "Workflow takes too long to complete",
				"solution": "Optimize test parallelization, use faster linting rules, implement incremental builds"
			}
		}
	}
}
