{
  "$schema": "https://raw.githubusercontent.com/oxc-project/oxc/main/npm/oxlint/configuration_schema.json",
  "extends": ["../../.oxlintrc.json"],
  "plugins": [
    "typescript",
    "oxc",
    "jsdoc",
    "promise"
  ],
  "rules": {
    // Máxima strictness para segurança
    "typescript/no-explicit-any": "error",
    "typescript/no-unsafe-assignment": "error",
    "typescript/no-unsafe-member-access": "error",
    "typescript/no-unsafe-call": "error",
    "typescript/no-unsafe-return": "error",
    "typescript/no-unsafe-argument": "error",
    "typescript/prefer-optional-chain": "error",
    "typescript/prefer-nullish-coalescing": "error",
    "typescript/strict-boolean-expressions": "error",

    // Security específico
    "no-eval": "error",
    "no-implied-eval": "error",
    "no-new-func": "error",
    "no-script-url": "error",
    "no-proto": "error",
    "no-caller": "error",
    "no-extend-native": "error",
    "no-global-assign": "error",
    "no-implicit-globals": "error",

    // Crypto específico
    "no-restricted-imports": [
      "error",
      {
        "paths": [
          {
            "name": "crypto",
            "message": "Use secure crypto utilities from @neonpro/security package"
          },
          {
            "name": "node:crypto",
            "message": "Use secure crypto utilities from @neonpro/security package"
          }
        ]
      }
    ],

    // Promise handling crítico
    "promise/prefer-await-to-then": "error",
    "promise/no-return-wrap": "error",
    "promise/param-names": "error",
    "promise/catch-or-return": "error",
    "promise/no-nesting": "error",
    "promise/no-promise-in-callback": "error",
    "promise/no-callback-in-promise": "error",

    // Documentação obrigatória
    "jsdoc/require-jsdoc": [
      "error",
      {
        "contexts": [
          "FunctionExpression",
          "FunctionDeclaration",
          "ClassDeclaration",
          "MethodDefinition",
          "PropertyDefinition",
          "ExportNamedDeclaration"
        ],
        "require": {
          "FunctionExpression": true,
          "FunctionDeclaration": true,
          "ClassDeclaration": true,
          "MethodDefinition": true
        }
      }
    ],
    "jsdoc/require-description": "error",
    "jsdoc/require-param": "error",
    "jsdoc/require-returns": "error",
    "jsdoc/check-param-names": "error",
    "jsdoc/check-tag-names": "error",
    "jsdoc/check-types": "error",

    // Variáveis e constantes
    "prefer-const": "error",
    "no-var": "error",
    "no-let-const": "off",
    "no-unused-vars": [
      "error",
      {
        "ignoreRestSiblings": false,
        "argsIgnorePattern": "^_"
      }
    ],

    // Debugging proibido em produção
    "no-console": "error",
    "no-debugger": "error",
    "no-alert": "error",

    // Performance crítico
    "no-await-in-loop": "error",
    "no-extra-bind": "error",
    "no-extra-label": "error",
    "no-floating-decimal": "error",
    "no-loop-func": "error",

    // Code quality máximo
    "complexity": ["error", 8],
    "max-depth": ["error", 4],
    "max-lines": ["error", 300],
    "max-lines-per-function": ["error", 50],
    "max-params": ["error", 4]
  },
  "overrides": [
    {
      "files": ["src/encryption/**/*.ts"],
      "rules": {
        "no-restricted-imports": "off",
        "jsdoc/require-jsdoc": "error",
        "jsdoc/require-description": "error",
        "jsdoc/require-param": "error",
        "jsdoc/require-returns": "error",
        "typescript/no-explicit-any": "error"
      }
    },
    {
      "files": ["src/auth/**/*.ts"],
      "rules": {
        "jsdoc/require-jsdoc": "error",
        "typescript/no-explicit-any": "error",
        "no-console": "error"
      }
    },
    {
      "files": ["src/validation/**/*.ts"],
      "rules": {
        "jsdoc/require-jsdoc": "error",
        "typescript/no-explicit-any": "error",
        "typescript/strict-boolean-expressions": "error"
      }
    }
  ],
  "ignorePatterns": [
    "node_modules/**",
    "dist/**",
    "build/**",
    "coverage/**",
    "*.min.js",
    ".turbo/**"
  ]
}
