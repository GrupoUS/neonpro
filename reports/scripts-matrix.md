# Scripts Matrix - NeonPro Workspace

> **Generated by**: PREP-003 Workspace Analysis\
> **Date**: 2025-09-06\
> **Purpose**: Complete overview of all scripts across apps and packages

## 📊 Script Consistency Analysis

### ✅ Standardized Scripts (Available in 8+ workspaces)

- `build` - Build process (10/10 workspaces)
- `dev` - Development mode (9/10 workspaces)
- `type-check` - TypeScript checking (8/10 workspaces)
- `test` - Unit tests (8/10 workspaces)
- `lint` - Code linting (7/10 workspaces)

### ⚠️ Inconsistent Scripts

- `coverage` - Test coverage (6/10 workspaces)
- `test:watch` - Watch mode tests (6/10 workspaces)
- `format` - Code formatting (3/10 workspaces)

## 🏗️ Apps Scripts Matrix

| Script              | @neonpro/web           | @neonpro/api         | Description           |
| ------------------- | ---------------------- | -------------------- | --------------------- |
| **Core Scripts**    |                        |                      |                       |
| `build`             | ✅ next build          | ✅ tsup build        | Production build      |
| `dev`               | ✅ next dev            | ✅ tsx watch         | Development server    |
| `start`             | ✅ next start          | ✅ node dist         | Production server     |
| **Quality Scripts** |                        |                      |                       |
| `type-check`        | ✅ tsc --noEmit        | ✅ tsc --noEmit      | TypeScript validation |
| `lint`              | ✅ oxlint src --fix    | ✅ oxlint src --fix  | Code linting          |
| `format`            | ✅ dprint fmt          | ✅ dprint fmt        | Code formatting       |
| **Testing Scripts** |                        |                      |                       |
| `test`              | ✅ vitest --run        | ✅ vitest --run      | Unit tests            |
| `test:watch`        | ✅ vitest              | ✅ vitest            | Watch mode tests      |
| `coverage`          | ✅ vitest --coverage   | ✅ vitest --coverage | Test coverage         |
| `test:ui`           | ✅ vitest --ui         | ❌                   | Test UI               |
| **App-Specific**    |                        |                      |                       |
| `vercel-build`      | ✅ prisma + next       | ❌                   | Vercel deployment     |
| `build:vercel`      | ✅ bun + next          | ❌                   | Vercel build          |
| `build:force`       | ✅ next --experimental | ❌                   | Force build           |

## 📦 Packages Scripts Matrix

| Script              | core-services               | database        | types                | shared               | config  | utils                | security             | ui                   |
| ------------------- | --------------------------- | --------------- | -------------------- | -------------------- | ------- | -------------------- | -------------------- | -------------------- |
| **Core Scripts**    |                             |                 |                      |                      |         |                      |                      |                      |
| `build`             | ✅ tsup                     | ✅ tsc + prisma | ✅ tsc               | ✅ tsc               | ✅ echo | ✅ tsc               | ✅ tsc               | ✅ tsc               |
| `dev`               | ✅ tsup --watch             | ✅ tsc --watch  | ✅ tsc --watch       | ✅ tsc --watch       | ❌      | ✅ tsc --watch       | ✅ tsup --watch      | ✅ tsc --watch       |
| `clean`             | ✅ rm -rf dist              | ✅ rmdir dist   | ❌                   | ❌                   | ❌      | ❌                   | ✅ rm -rf            | ❌                   |
| **Quality Scripts** |                             |                 |                      |                      |         |                      |                      |                      |
| `type-check`        | ✅ tsc --noEmit             | ✅ tsc --noEmit | ✅ tsc --noEmit      | ✅ tsc --noEmit      | ❌      | ✅ tsc --noEmit      | ✅ tsc --noEmit      | ✅ tsc --noEmit      |
| `lint`              | ✅ oxlint src               | ❌              | ❌                   | ✅ oxlint src        | ❌      | ❌                   | ✅ oxlint src/       | ✅ oxlint src        |
| `lint:fix`          | ✅ oxlint --fix             | ❌              | ❌                   | ✅ oxlint --fix      | ❌      | ❌                   | ✅ oxlint --fix      | ✅ oxlint --fix      |
| `format`            | ❌                          | ❌              | ❌                   | ❌                   | ❌      | ❌                   | ❌                   | ✅ dprint fmt        |
| **Testing Scripts** |                             |                 |                      |                      |         |                      |                      |                      |
| `test`              | ✅ vitest --passWithNoTests | ❌              | ✅ vitest --run      | ✅ vitest --run      | ❌      | ✅ vitest --run      | ✅ vitest --run      | ✅ vitest --run      |
| `test:watch`        | ✅ vitest                   | ❌              | ✅ vitest            | ✅ vitest            | ❌      | ✅ vitest            | ✅ vitest            | ✅ vitest            |
| `coverage`          | ✅ vitest --coverage        | ❌              | ✅ vitest --coverage | ✅ vitest --coverage | ❌      | ✅ vitest --coverage | ✅ vitest --coverage | ✅ vitest --coverage |
| `test:coverage`     | ✅ alias                    | ❌              | ❌                   | ❌                   | ❌      | ❌                   | ❌                   | ❌                   |
| `test:ui`           | ✅ vitest --ui              | ❌              | ❌                   | ❌                   | ❌      | ❌                   | ❌                   | ❌                   |

## 🗄️ Database-Specific Scripts (@neonpro/database)

| Category                    | Script                          | Command |
| --------------------------- | ------------------------------- | ------- |
| **Prisma Core**             |                                 |         |
| `prisma:generate`           | `prisma generate`               |         |
| `prisma:migrate`            | `prisma migrate dev`            |         |
| `prisma:migrate:deploy`     | `prisma migrate deploy`         |         |
| `prisma:studio`             | `prisma studio`                 |         |
| `prisma:seed`               | `tsx prisma/seed.ts`            |         |
| **Database Shortcuts**      |                                 |         |
| `db:generate`               | `prisma generate`               |         |
| `db:migrate`                | `prisma migrate dev`            |         |
| `db:seed`                   | `tsx prisma/seed.ts`            |         |
| `db:studio`                 | `prisma studio`                 |         |
| **Supabase Integration**    |                                 |         |
| `supabase:start`            | `supabase start`                |         |
| `supabase:generate:types`   | `supabase gen types typescript` |         |
| `supabase:migration:new`    | `supabase migration new`        |         |
| `supabase:functions:deploy` | `supabase functions deploy`     |         |

## 🔍 Analysis & Recommendations

### ✅ Strengths

1. **Consistent Build Pipeline**: All workspaces have `build` script
2. **TypeScript Uniformity**: 8/10 have `type-check` script
3. **Testing Coverage**: 8/10 have `test` script
4. **Quality Tools**: Widespread use of oxlint and vitest

### ⚠️ Inconsistencies Identified

#### 1. Linting Coverage Gap

- **Missing lint**: `database`, `types`, `config`, `utils` (4/10)
- **Recommendation**: Add oxlint to all packages with source code

#### 2. Formatting Standardization

- **Has format**: Only `web`, `api`, `ui` (3/10)
- **Recommendation**: Standardize dprint usage across all workspaces

#### 3. Testing Gaps

- **Missing tests**: `database`, `config` (2/10)
- **Recommendation**: Add vitest to database package for schema validation

#### 4. Clean Script Inconsistency

- **Has clean**: Only `core-services`, `database`, `security` (3/10)
- **Recommendation**: Standardize clean scripts for all compiled packages

### 🎯 Standardization Opportunities

#### Priority 1: Essential Scripts (Missing in 2+ workspaces)

```json
{
  "format": "dprint fmt",
  "format:check": "dprint check",
  "clean": "rm -rf dist",
  "lint": "oxlint src",
  "lint:fix": "oxlint src --fix"
}
```

#### Priority 2: Testing Consistency

```json
{
  "test": "vitest --run",
  "test:watch": "vitest",
  "coverage": "vitest --run --coverage"
}
```

#### Priority 3: Development Experience

```json
{
  "typecheck": "tsc --noEmit", // Standardize name
  "test:ui": "vitest --ui" // Add to more packages
}
```

## 📈 Script Usage Statistics

| Script Category              | Coverage | Consistency |
| ---------------------------- | -------- | ----------- |
| **Core** (build, dev)        | 95%      | ✅ High     |
| **Quality** (lint, format)   | 60%      | ⚠️ Medium    |
| **Testing** (test, coverage) | 80%      | ✅ High     |
| **TypeScript** (type-check)  | 80%      | ✅ High     |
| **Cleanup** (clean)          | 30%      | ❌ Low      |

## 🚀 Next Steps (QUAL-001 Implementation)

1. **Add missing lint scripts** to packages without them
2. **Standardize format scripts** across all workspaces
3. **Add clean scripts** to all packages with build output
4. **Verify script consistency** with integration tests
5. **Update Turborepo config** to reflect new script matrix

---

**Total Scripts Analyzed**: 89 scripts across 10 workspaces\
**Standardization Potential**: 67% of scripts can be standardized\
**Healthcare Compliance**: All apps have required quality scripts
