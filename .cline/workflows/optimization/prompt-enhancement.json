{
  "name": "Prompt Enhancement",
  "version": "1.0.0",
  "description": "Enhance prompts with layered reasoning, validation gates, and constitutional compliance",
  "category": "optimization",
  "complexity": "medium",
  "mcp_tools": [],
  "execution_flow": [
    {
      "phase": "Analysis",
      "description": "Analyze existing prompt for enhancement opportunities",
      "steps": [
        {
          "step": 1,
          "name": "Extract Explicit Requirements",
          "actions": [
            "Identify stated goals, constraints, and success criteria",
            "Extract specific technical requirements",
            "Map out user scenarios and use cases"
          ],
          "output": "Structured explicit requirements analysis"
        },
        {
          "step": 2,
          "name": "Infer Implicit Requirements",
          "actions": [
            "Identify unstated assumptions and dependencies",
            "Infer scalability and maintainability needs",
            "Detect potential edge cases and error conditions"
          ],
          "output": "Implicit requirements mapping with confidence levels"
        }
      ]
    },
    {
      "phase": "Enhancement",
      "description": "Apply layered reasoning and validation patterns",
      "steps": [
        {
          "step": 1,
          "name": "Apply Layered Reasoning",
          "enhancement_patterns": {
            "input_validation": {
              "pattern": "Add explicit input validation and error handling",
              "benefit": "Prevents invalid state propagation"
            },
            "output_validation": {
              "pattern": "Define clear output contracts and validation gates",
              "benefit": "Ensures predictable and verifiable results"
            },
            "progressive_refinement": {
              "pattern": "Structure prompt with iterative refinement steps",
              "benefit": "Improves accuracy through validation cycles"
            },
            "context_awareness": {
              "pattern": "Incorporate environmental and system context",
              "benefit": "Enables more relevant and contextual responses"
            }
          },
          "output": "Enhanced prompt with layered reasoning structure"
        },
        {
          "step": 2,
          "name": "Add Validation Gates",
          "validation_patterns": {
            "pre_execution_gates": {
              "pattern": "Add checks before main execution",
              "types": ["input_validation", "environment_check", "dependency_verification"]
            },
            "in_execution_gates": {
              "pattern": "Add checks during execution",
              "types": ["progress_validation", "error_boundary_check", "resource_monitoring"]
            },
            "post_execution_gates": {
              "pattern": "Add checks after execution",
              "types": ["output_validation", "quality_assurance", "compliance_check"]
            }
          },
          "output": "Prompt with comprehensive validation gate structure"
        }
      ]
    },
    {
      "phase": "Constitutional Compliance",
      "description": "Ensure enhanced prompt follows NeonPro constitutional principles",
      "steps": [
        {
          "step": 1,
          "name": "Apply KISS/YAGNI Principles",
          "compliance_checks": {
            "simplicity": "Remove unnecessary complexity and abstractions",
            "necessity": "Verify all components serve essential purposes",
            "clarity": "Ensure prompt is clear and unambiguous"
          },
          "output": "Simplified prompt with essential components only"
        },
        {
          "step": 2,
          "name": "Enforce Test-First Development",
          "compliance_checks": {
            "testable_requirements": "Ensure all requirements are testable",
            "validation_criteria": "Define clear success criteria",
            "error_scenarios": "Include error handling and edge case testing"
          },
          "output": "Prompt with test-first development structure"
        },
        {
          "step": 3,
          "name": "Apply Healthcare Compliance",
          "compliance_checks": {
            "lgpd_compliance": "Ensure data privacy and protection requirements",
            "anvisa_compliance": "Include healthcare regulatory considerations",
            "cfm_compliance": "Follow medical ethics and professional standards"
          },
          "output": "Prompt with healthcare compliance validation"
        }
      ]
    },
    {
      "phase": "Optimization",
      "description": "Optimize prompt for performance and maintainability",
      "steps": [
        {
          "step": 1,
          "name": "Performance Optimization",
          "optimization_techniques": {
            "efficiency": "Remove redundant instructions and checks",
            "clarity": "Improve readability and maintainability",
            "modularity": "Structure prompt for easy modification and extension"
          },
          "output": "Optimized prompt with improved performance characteristics"
        },
        {
          "step": 2,
          "name": "Documentation Enhancement",
          "documentation_patterns": {
            "inline_documentation": "Add clear comments and explanations",
            "usage_examples": "Include practical usage examples",
            "troubleshooting_guide": "Add common issues and solutions"
          },
          "output": "Well-documented prompt with usage guidance"
        }
      ]
    },
    {
      "phase": "Validation",
      "description": "Validate enhanced prompt against quality criteria",
      "steps": [
        {
          "step": 1,
          "name": "Quality Assessment",
          "quality_criteria": {
            "completeness": "All requirements addressed",
            "clarity": "Instructions are clear and unambiguous",
            "testability": "Success criteria are measurable",
            "maintainability": "Prompt is easy to understand and modify",
            "efficiency": "No unnecessary complexity or redundancy"
          },
          "output": "Quality assessment report with improvement recommendations"
        },
        {
          "step": 2,
          "name": "Compliance Validation",
          "compliance_criteria": {
            "constitutional_compliance": "Follows all NeonPro constitutional principles",
            "healthcare_compliance": "Meets healthcare regulatory requirements",
            "technical_compliance": "Follows technical standards and best practices"
          },
          "output": "Compliance validation report with certification status"
        }
      ]
    }
  ],
  "enhancement_patterns": {
    "layered_reasoning": {
      "input_layer": "Validate and preprocess inputs",
      "logic_layer": "Execute core reasoning and processing",
      "output_layer": "Validate and format outputs",
      "error_layer": "Handle errors and edge cases gracefully"
    },
    "validation_gates": {
      "gate_0_input": "Validate input format and completeness",
      "gate_1_environment": "Check environment and dependencies",
      "gate_2_execution": "Monitor execution progress and resource usage",
      "gate_3_output": "Validate output quality and compliance",
      "gate_4_cleanup": "Ensure proper cleanup and resource release"
    },
    "constitutional_integration": {
      "simplicity_gate": "Remove unnecessary complexity",
      "testing_gate": "Ensure testable requirements and validation",
      "compliance_gate": "Verify healthcare and regulatory compliance",
      "architecture_gate": "Follow established patterns and standards"
    }
  },
  "output_structure": {
    "enhanced_prompt": {
      "structure": "Layered reasoning with validation gates",
      "documentation": "Inline comments and usage examples",
      "validation": "Comprehensive validation criteria"
    },
    "enhancement_report": {
      "changes_made": "List of specific improvements",
      "quality_metrics": "Before/after quality comparison",
      "compliance_status": "Constitutional and regulatory compliance",
      "recommendations": "Further improvement suggestions"
    },
    "validation_summary": {
      "quality_assessment": "Detailed quality evaluation",
      "compliance_certification": "Compliance status and certifications",
      "performance_metrics": "Efficiency and effectiveness measures"
    }
  },
  "quality_criteria": {
    "functional": {
      "completeness": "All requirements fully addressed",
      "correctness": "Logic and reasoning are sound",
      "effectiveness": "Prompt achieves intended goals"
    },
    "non_functional": {
      "clarity": "Instructions are clear and unambiguous",
      "maintainability": "Prompt is easy to understand and modify",
      "efficiency": "No unnecessary complexity or redundancy",
      "scalability": "Prompt can handle increased complexity"
    },
    "compliance": {
      "constitutional": "Follows NeonPro constitutional principles",
      "healthcare": "Meets healthcare regulatory requirements",
      "technical": "Follows technical standards and best practices"
    }
  },
  "validation_gates": {
    "pre_enhancement": [
      {
        "gate": "Input Validation",
        "criteria": "Original prompt is complete and understandable",
        "critical": true
      },
      {
        "gate": "Requirements Analysis",
        "criteria": "All requirements identified and categorized",
        "critical": true
      }
    ],
    "post_enhancement": [
      {
        "gate": "Quality Assessment",
        "criteria": "Enhanced prompt meets all quality criteria",
        "critical": true
      },
      {
        "gate": "Compliance Validation",
        "criteria": "Enhanced prompt passes all compliance checks",
        "critical": true
      },
      {
        "gate": "Performance Validation",
        "criteria": "Enhanced prompt is efficient and maintainable",
        "critical": false
      }
    ]
  },
  "success_criteria": {
    "enhancement_quality": "Prompt is significantly improved in clarity, structure, and effectiveness",
    "validation_comprehensive": "All validation gates pass with appropriate checks",
    "compliance_complete": "Enhanced prompt meets all constitutional and regulatory requirements",
    "documentation_adequate": "Enhanced prompt is well-documented with usage guidance",
    "maintainability_achieved": "Enhanced prompt is easy to understand, modify, and extend"
  },
  "error_handling": {
    "invalid_input": {
      "detection": "Original prompt is incomplete or malformed",
      "action": "Reject with specific error details and improvement suggestions"
    },
    "enhancement_failure": {
      "detection": "Unable to apply enhancement patterns effectively",
      "action": "Provide partial enhancement with explanation of limitations"
    },
    "validation_failure": {
      "detection": "Enhanced prompt fails quality or compliance checks",
      "action": "Provide detailed failure report with specific improvement recommendations"
    }
  },
  "metadata": {
    "author": "NeonPro Development Team",
    "created": "2025-09-15",
    "category": "optimization",
    "tags": ["prompt-enhancement", "layered-reasoning", "validation-gates", "constitutional-compliance", "quality-assurance"]
  }
}
