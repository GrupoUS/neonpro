# Scripts Matrix - NeonPro Workspace

> **Generated by**: PREP-003 Workspace Analysis\
> **Date**: 2025-09-06\
> **Purpose**: Complete overview of all scripts across apps and packages

## ğŸ“Š Script Consistency Analysis

### âœ… Standardized Scripts (Available in 8+ workspaces)

- `build` - Build process (10/10 workspaces)
- `dev` - Development mode (9/10 workspaces)
- `type-check` - TypeScript checking (8/10 workspaces)
- `test` - Unit tests (8/10 workspaces)
- `lint` - Code linting (7/10 workspaces)

### âš ï¸ Inconsistent Scripts

- `coverage` - Test coverage (6/10 workspaces)
- `test:watch` - Watch mode tests (6/10 workspaces)
- `format` - Code formatting (3/10 workspaces)

## ğŸ—ï¸ Apps Scripts Matrix

| Script              | @neonpro/web           | @neonpro/api         | Description           |
| ------------------- | ---------------------- | -------------------- | --------------------- |
| **Core Scripts**    |                        |                      |                       |
| `build`             | âœ… next build          | âœ… tsup build        | Production build      |
| `dev`               | âœ… next dev            | âœ… tsx watch         | Development server    |
| `start`             | âœ… next start          | âœ… node dist         | Production server     |
| **Quality Scripts** |                        |                      |                       |
| `type-check`        | âœ… tsc --noEmit        | âœ… tsc --noEmit      | TypeScript validation |
| `lint`              | âœ… oxlint src --fix    | âœ… oxlint src --fix  | Code linting          |
| `format`            | âœ… dprint fmt          | âœ… dprint fmt        | Code formatting       |
| **Testing Scripts** |                        |                      |                       |
| `test`              | âœ… vitest --run        | âœ… vitest --run      | Unit tests            |
| `test:watch`        | âœ… vitest              | âœ… vitest            | Watch mode tests      |
| `coverage`          | âœ… vitest --coverage   | âœ… vitest --coverage | Test coverage         |
| `test:ui`           | âœ… vitest --ui         | âŒ                   | Test UI               |
| **App-Specific**    |                        |                      |                       |
| `vercel-build`      | âœ… prisma + next       | âŒ                   | Vercel deployment     |
| `build:vercel`      | âœ… bun + next          | âŒ                   | Vercel build          |
| `build:force`       | âœ… next --experimental | âŒ                   | Force build           |

## ğŸ“¦ Packages Scripts Matrix

| Script              | core-services               | database        | types                | shared               | config  | utils                | security             | ui                   |
| ------------------- | --------------------------- | --------------- | -------------------- | -------------------- | ------- | -------------------- | -------------------- | -------------------- |
| **Core Scripts**    |                             |                 |                      |                      |         |                      |                      |                      |
| `build`             | âœ… tsup                     | âœ… tsc + prisma | âœ… tsc               | âœ… tsc               | âœ… echo | âœ… tsc               | âœ… tsc               | âœ… tsc               |
| `dev`               | âœ… tsup --watch             | âœ… tsc --watch  | âœ… tsc --watch       | âœ… tsc --watch       | âŒ      | âœ… tsc --watch       | âœ… tsup --watch      | âœ… tsc --watch       |
| `clean`             | âœ… rm -rf dist              | âœ… rmdir dist   | âŒ                   | âŒ                   | âŒ      | âŒ                   | âœ… rm -rf            | âŒ                   |
| **Quality Scripts** |                             |                 |                      |                      |         |                      |                      |                      |
| `type-check`        | âœ… tsc --noEmit             | âœ… tsc --noEmit | âœ… tsc --noEmit      | âœ… tsc --noEmit      | âŒ      | âœ… tsc --noEmit      | âœ… tsc --noEmit      | âœ… tsc --noEmit      |
| `lint`              | âœ… oxlint src               | âŒ              | âŒ                   | âœ… oxlint src        | âŒ      | âŒ                   | âœ… oxlint src/       | âœ… oxlint src        |
| `lint:fix`          | âœ… oxlint --fix             | âŒ              | âŒ                   | âœ… oxlint --fix      | âŒ      | âŒ                   | âœ… oxlint --fix      | âœ… oxlint --fix      |
| `format`            | âŒ                          | âŒ              | âŒ                   | âŒ                   | âŒ      | âŒ                   | âŒ                   | âœ… dprint fmt        |
| **Testing Scripts** |                             |                 |                      |                      |         |                      |                      |                      |
| `test`              | âœ… vitest --passWithNoTests | âŒ              | âœ… vitest --run      | âœ… vitest --run      | âŒ      | âœ… vitest --run      | âœ… vitest --run      | âœ… vitest --run      |
| `test:watch`        | âœ… vitest                   | âŒ              | âœ… vitest            | âœ… vitest            | âŒ      | âœ… vitest            | âœ… vitest            | âœ… vitest            |
| `coverage`          | âœ… vitest --coverage        | âŒ              | âœ… vitest --coverage | âœ… vitest --coverage | âŒ      | âœ… vitest --coverage | âœ… vitest --coverage | âœ… vitest --coverage |
| `test:coverage`     | âœ… alias                    | âŒ              | âŒ                   | âŒ                   | âŒ      | âŒ                   | âŒ                   | âŒ                   |
| `test:ui`           | âœ… vitest --ui              | âŒ              | âŒ                   | âŒ                   | âŒ      | âŒ                   | âŒ                   | âŒ                   |

## ğŸ—„ï¸ Database-Specific Scripts (@neonpro/database)

| Category                    | Script                          | Command |
| --------------------------- | ------------------------------- | ------- |
| **Prisma Core**             |                                 |         |
| `prisma:generate`           | `prisma generate`               |         |
| `prisma:migrate`            | `prisma migrate dev`            |         |
| `prisma:migrate:deploy`     | `prisma migrate deploy`         |         |
| `prisma:studio`             | `prisma studio`                 |         |
| `prisma:seed`               | `tsx prisma/seed.ts`            |         |
| **Database Shortcuts**      |                                 |         |
| `db:generate`               | `prisma generate`               |         |
| `db:migrate`                | `prisma migrate dev`            |         |
| `db:seed`                   | `tsx prisma/seed.ts`            |         |
| `db:studio`                 | `prisma studio`                 |         |
| **Supabase Integration**    |                                 |         |
| `supabase:start`            | `supabase start`                |         |
| `supabase:generate:types`   | `supabase gen types typescript` |         |
| `supabase:migration:new`    | `supabase migration new`        |         |
| `supabase:functions:deploy` | `supabase functions deploy`     |         |

## ğŸ” Analysis & Recommendations

### âœ… Strengths

1. **Consistent Build Pipeline**: All workspaces have `build` script
2. **TypeScript Uniformity**: 8/10 have `type-check` script
3. **Testing Coverage**: 8/10 have `test` script
4. **Quality Tools**: Widespread use of oxlint and vitest

### âš ï¸ Inconsistencies Identified

#### 1. Linting Coverage Gap

- **Missing lint**: `database`, `types`, `config`, `utils` (4/10)
- **Recommendation**: Add oxlint to all packages with source code

#### 2. Formatting Standardization

- **Has format**: Only `web`, `api`, `ui` (3/10)
- **Recommendation**: Standardize dprint usage across all workspaces

#### 3. Testing Gaps

- **Missing tests**: `database`, `config` (2/10)
- **Recommendation**: Add vitest to database package for schema validation

#### 4. Clean Script Inconsistency

- **Has clean**: Only `core-services`, `database`, `security` (3/10)
- **Recommendation**: Standardize clean scripts for all compiled packages

### ğŸ¯ Standardization Opportunities

#### Priority 1: Essential Scripts (Missing in 2+ workspaces)

```json
{
  "format": "dprint fmt",
  "format:check": "dprint check",
  "clean": "rm -rf dist",
  "lint": "oxlint src",
  "lint:fix": "oxlint src --fix"
}
```

#### Priority 2: Testing Consistency

```json
{
  "test": "vitest --run",
  "test:watch": "vitest",
  "coverage": "vitest --run --coverage"
}
```

#### Priority 3: Development Experience

```json
{
  "typecheck": "tsc --noEmit", // Standardize name
  "test:ui": "vitest --ui" // Add to more packages
}
```

## ğŸ“ˆ Script Usage Statistics

| Script Category              | Coverage | Consistency |
| ---------------------------- | -------- | ----------- |
| **Core** (build, dev)        | 95%      | âœ… High     |
| **Quality** (lint, format)   | 60%      | âš ï¸ Medium    |
| **Testing** (test, coverage) | 80%      | âœ… High     |
| **TypeScript** (type-check)  | 80%      | âœ… High     |
| **Cleanup** (clean)          | 30%      | âŒ Low      |

## ğŸš€ Next Steps (QUAL-001 Implementation)

1. **Add missing lint scripts** to packages without them
2. **Standardize format scripts** across all workspaces
3. **Add clean scripts** to all packages with build output
4. **Verify script consistency** with integration tests
5. **Update Turborepo config** to reflect new script matrix

---

**Total Scripts Analyzed**: 89 scripts across 10 workspaces\
**Standardization Potential**: 67% of scripts can be standardized\
**Healthcare Compliance**: All apps have required quality scripts
