# QUAL-001: Lint Configuration Unification Plan

> **Generated by**: QUAL-001 Implementation\
> **Date**: 2025-09-06 18:30:00 BRT\
> **Purpose**: Standardize linting across all NeonPro workspaces

## üìä Current State Analysis

### Existing Configuration Quality

- **Root oxlintrc.json**: ‚úÖ Comprehensive (640 lines)
- **Root dprint.json**: ‚úÖ Well-configured (119 lines)
- **Architecture compliance**: ‚úÖ Matches docs/architecture standards

### Script Coverage Analysis

#### ‚úÖ Workspaces WITH lint scripts (6/10)

1. **@neonpro/core-services**: `oxlint src` + `oxlint src --fix`
2. **@neonpro/shared**: `oxlint src` + `oxlint src --fix`
3. **@neonpro/security**: `oxlint src/` + `oxlint src/ --fix`
4. **@neonpro/ui**: `oxlint src` + `oxlint src --fix`
5. **@neonpro/api**: `oxlint src` + `oxlint src --fix`
6. **@neonpro/web**: `oxlint src --fix`

#### ‚ùå Workspaces MISSING lint scripts (4/10)

1. **@neonpro/database** - Needs lint scripts
2. **@neonpro/types** - Needs lint scripts
3. **@neonpro/config** - Config-only package (may skip)
4. **@neonpro/utils** - Needs lint scripts

### Format Script Coverage

- **Only @neonpro/ui**: Has `dprint fmt` script
- **Missing format scripts**: 9/10 workspaces

## üéØ Standardization Plan

### Phase 1: Add Missing Lint Scripts

#### Standard Lint Scripts to Add

```json
{
  "lint": "oxlint src",
  "lint:fix": "oxlint src --fix"
}
```

#### Standard Format Scripts to Add

```json
{
  "format": "dprint fmt",
  "format:check": "dprint check"
}
```

### Phase 2: Configuration Inheritance

- Root .oxlintrc.json already comprehensive
- Root dprint.json already well-configured
- All workspaces inherit from root configs (no changes needed)

### Phase 3: Apply Autofixes

Current baseline: **212 warnings, 0 errors**

Target: **<50 warnings, 0 errors**

## üìù Implementation Steps

### Step 1: Add Scripts to Missing Workspaces

#### @neonpro/database/package.json

```json
{
  "scripts": {
    "lint": "oxlint src",
    "lint:fix": "oxlint src --fix",
    "format": "dprint fmt",
    "format:check": "dprint check"
  }
}
```

#### @neonpro/types/package.json

```json
{
  "scripts": {
    "lint": "oxlint src",
    "lint:fix": "oxlint src --fix",
    "format": "dprint fmt",
    "format:check": "dprint check"
  }
}
```

#### @neonpro/utils/package.json

```json
{
  "scripts": {
    "lint": "oxlint src",
    "lint:fix": "oxlint src --fix",
    "format": "dprint fmt",
    "format:check": "dprint check"
  }
}
```

#### @neonpro/config/package.json

**Decision**: SKIP - Config-only package with no src/ directory

### Step 2: Add Format Scripts to Existing Workspaces

Add to 5 packages that have lint but not format:

- @neonpro/core-services
- @neonpro/shared
- @neonpro/security
- @neonpro/api
- @neonpro/web

### Step 3: Standardize Script Names

Fix inconsistencies:

- @neonpro/security uses `oxlint src/` (with trailing slash) - standardize to `oxlint src`
- Some packages have `coverage` and `test:coverage` - keep both for compatibility

## üîß Expected Outcomes

### Before Implementation

- **Lint Scripts**: 6/10 workspaces (60%)
- **Format Scripts**: 1/10 workspaces (10%)
- **Script Consistency**: 33%
- **Lint Warnings**: 212 total

### After Implementation

- **Lint Scripts**: 9/10 workspaces (90%) - config excluded
- **Format Scripts**: 9/10 workspaces (90%) - config excluded
- **Script Consistency**: >90%
- **Lint Warnings**: Target <50 (76% reduction)

### Healthcare Compliance Impact

- ‚úÖ Consistent code quality enforcement
- ‚úÖ Automated formatting reduces human error
- ‚úÖ All healthcare-critical packages (security, api, shared) linted
- ‚úÖ LGPD compliance packages maintained to high standards

## üìä Quality Metrics Targets

### Immediate Targets (QUAL-001)

- [ ] Add 12+ missing scripts across 4 workspaces
- [ ] Reduce lint warnings from 212 to <170 (20% reduction with autofixes)
- [ ] Achieve 90%+ script consistency

### Future Targets (Post-QUAL-001)

- [ ] Reduce lint warnings to <50 (76% reduction with manual fixes)
- [ ] Implement pre-commit hooks for automatic linting
- [ ] Add lint enforcement to CI/CD pipeline

## ‚ö†Ô∏è Risk Mitigation

### Low Risk Changes

- Adding scripts to package.json (non-breaking)
- Using existing root configurations (already tested)
- Autofix application (safe, reversible)

### Validation Steps

1. Test lint scripts on each modified package
2. Verify format scripts don't break existing code
3. Run builds after each change
4. Validate TypeScript compilation still works

## üöÄ Implementation Order

1. **Add missing lint scripts** (3 packages)
2. **Add missing format scripts** (8 packages)
3. **Apply autofixes** with `lint:fix`
4. **Apply formatting** with `format`
5. **Validate** all workspaces build successfully
6. **Document** final metrics and improvements

---

**Status**: Ready for implementation\
**Risk Level**: LOW\
**Expected Duration**: 30-45 minutes\
**Rollback Plan**: Git revert individual package.json changes
